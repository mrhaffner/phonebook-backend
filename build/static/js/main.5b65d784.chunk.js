(this.webpackJsonppart2_ex=this.webpackJsonppart2_ex||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),u=t.n(c),a=t(15),i=t.n(a),o=t(6),s=t(3),j=function(e){var n=e.setNewFilter;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{onChange:function(e){return n(e.target.value)}})]})},d=function(e){var n=e.submitPerson,t=e.setNewName,c=e.setNewNumber,u=e.newName,a=e.newNumber;return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{onChange:function(e){return t(e.target.value)},value:u})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{onChange:function(e){return c(e.target.value)},value:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},b=function(e){var n=e.person,t=e.removePerson,c=n.number,u=n.name,a=n.id;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[u," ",c]}),Object(r.jsx)("button",{onClick:t(a),children:"delete"})]})},l=function(e){var n=e.persons,t=e.filter,c=e.removePerson;return Object(r.jsx)("div",{children:n.map((function(e){return e.name.toLowerCase().includes(t.toLowerCase())?Object(r.jsx)(b,{person:e,removePerson:c},e.name):null}))})},f=function(e){var n=e.message,t=e.messageClass;return null===n?null:Object(r.jsx)("div",{className:t?"added":"deleted",children:n})},m=t(4),h=t.n(m),O="/api/persons",v=function(){return h.a.get(O).then((function(e){return e.data}))},p=function(e){return h.a.post(O,e).then((function(e){return e.data}))},x=function(e,n){return h.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return h.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},N=(t(38),function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],u=n[1],a=Object(c.useState)(""),i=Object(s.a)(a,2),b=i[0],m=i[1],h=Object(c.useState)(""),O=Object(s.a)(h,2),N=O[0],g=O[1],C=Object(c.useState)(""),S=Object(s.a)(C,2),P=S[0],k=S[1],y=Object(c.useState)(null),T=Object(s.a)(y,2),A=T[0],D=T[1],E=Object(c.useState)(!0),F=Object(s.a)(E,2),I=F[0],J=F[1];Object(c.useEffect)((function(){v().then((function(e){return u(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{message:A,messageClass:I}),Object(r.jsx)(j,{setNewFilter:k}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(d,{submitPerson:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===b}))[0];if(n){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var r=Object(o.a)(Object(o.a)({},n),{},{number:N});x(n.id,r).then((function(e){u(t.map((function(n){return n.id!==e.id?n:e}))),m(""),g(""),J(!0),D("Updated ".concat(e.name,"'s phone number")),setTimeout((function(){D(null)}),5e3)})).catch((function(e){J(!1),u(t.filter((function(e){return e.name!==n.name}))),D("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){D(null)}),5e3)}))}}else p({name:b,number:N}).then((function(e){u(t.concat(e)),m(""),g(""),J(!0),D("Added ".concat(e.name)),setTimeout((function(){D(null)}),5e3)}))},setNewName:m,setNewNumber:g,newName:b,newNumber:N}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(l,{persons:t,filter:P,removePerson:function(e){return function(n){n.preventDefault(),w(e).then(u(t.filter((function(n){return n.id!==e}))))}}})]})});i.a.render(Object(r.jsx)(u.a.StrictMode,{children:Object(r.jsx)(N,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.5b65d784.chunk.js.map