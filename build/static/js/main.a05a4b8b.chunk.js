(this.webpackJsonppart2_ex=this.webpackJsonppart2_ex||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),u=t(15),o=t.n(u),s=t(6),i=t(3),j=function(e){var n=e.setNewFilter;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{onChange:function(e){return n(e.target.value)}})]})},d=function(e){var n=e.submitPerson,t=e.setNewName,c=e.setNewNumber,a=e.newName,u=e.newNumber;return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{onChange:function(e){return t(e.target.value)},value:a})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{onChange:function(e){return c(e.target.value)},value:u})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})})},b=function(e){var n=e.person,t=e.removePerson,c=n.number,a=n.name,u=n.id;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[a," ",c]}),Object(r.jsx)("button",{onClick:t(u),children:"delete"})]})},l=function(e){var n=e.persons,t=e.filter,c=e.removePerson;return Object(r.jsx)("div",{children:n.map((function(e){return e.name.toLowerCase().includes(t.toLowerCase())?Object(r.jsx)(b,{person:e,removePerson:c},e.name):null}))})},f=function(e){var n=e.message,t=e.messageClass;return null===n?null:Object(r.jsx)("div",{className:t?"added":"deleted",children:n})},m=t(4),h=t.n(m),O="/api/persons",p=function(){return h.a.get(O).then((function(e){return e.data}))},v=function(e){return h.a.post(O,e).then((function(e){return e.data}))},x=function(e,n){return h.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return h.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},N=(t(38),function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)(""),o=Object(i.a)(u,2),b=o[0],m=o[1],h=Object(c.useState)(""),O=Object(i.a)(h,2),N=O[0],g=O[1],C=Object(c.useState)(""),S=Object(i.a)(C,2),P=S[0],k=S[1],y=Object(c.useState)(null),A=Object(i.a)(y,2),D=A[0],E=A[1],F=Object(c.useState)(!0),I=Object(i.a)(F,2),J=I[0],L=I[1];Object(c.useEffect)((function(){p().then((function(e){return a(e)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{message:D,messageClass:J}),Object(r.jsx)(j,{setNewFilter:k}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(d,{submitPerson:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===b}))[0];if(n){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){Object(s.a)(Object(s.a)({},n),{},{number:N});x(n.id,{number:N}).then((function(e){a(t.map((function(n){return n.id!==e.id?n:e}))),E("Updated ".concat(e.name,"'s phone number"))})).catch((function(e){L(!1),a(t.filter((function(e){return e.name!==n.name}))),E("Information of ".concat(n.name," has already been removed from server"))}))}}else v({name:b,number:N}).then((function(e){a(t.concat(e)),E("Added ".concat(e.name))})).catch((function(e){console.log(e.response.data.error),L(!1),E(e.response.data.error)}));m(""),g(""),L(!0),setTimeout((function(){E(null)}),5e3)},setNewName:m,setNewNumber:g,newName:b,newNumber:N}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(l,{persons:t,filter:P,removePerson:function(e){return function(n){n.preventDefault(),w(e).then(a(t.filter((function(n){return n.id!==e}))))}}})]})});o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(N,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a05a4b8b.chunk.js.map